<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw);ol{margin:0;padding:0}table td,table th{padding:0}.c0{color:#dcdcdc;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:"Consolas";font-style:normal}.c4{color:#d4d4d4;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:"Consolas";font-style:normal}.c1{background-color:#1e1f20;padding-top:0pt;padding-bottom:0pt;line-height:1.3571428571428572;orphans:2;widows:2;text-align:left}.c19{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c20{font-size:10.5pt;font-family:"Consolas";color:#5bb498;font-weight:400}.c13{font-size:10.5pt;font-family:"Consolas";color:#b5cea8;font-weight:400}.c11{font-size:10.5pt;font-family:"Consolas";color:#c58af9;font-weight:400}.c10{font-size:10.5pt;font-family:"Consolas";color:#9cdcfe;font-weight:400}.c7{font-size:10.5pt;font-family:"Consolas";color:#569cd6;font-weight:400}.c2{font-size:10.5pt;font-family:"Consolas";color:#808080;font-weight:400}.c12{font-size:10.5pt;font-family:"Consolas";color:#3dc9b0;font-weight:400}.c17{color:#000000;font-weight:400;font-size:11pt;font-family:"Arial"}.c8{font-size:10.5pt;font-family:"Consolas";color:#fa903e;font-weight:400}.c3{font-size:10.5pt;font-family:"Consolas";color:#dcdcdc;font-weight:400}.c14{font-size:10.5pt;font-family:"Consolas";color:#81c995;font-weight:400}.c16{color:#80868b;font-weight:400;font-size:10.5pt;font-family:"Consolas"}.c5{font-size:10.5pt;font-family:"Consolas";color:#d4d4d4;font-weight:400}.c15{font-size:10.5pt;font-family:"Consolas";color:#ce9178;font-weight:400}.c6{text-decoration:none;vertical-align:baseline;font-style:normal}.c18{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c9{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c18 doc-content"><p class="c1"><span class="c7">&lt;!DOCTYPE</span><span class="c10">&nbsp;html</span><span class="c7 c6">&gt;</span></p><p class="c1"><span class="c2">&lt;</span><span class="c7">html</span><span class="c5">&nbsp;</span><span class="c10">lang</span><span class="c2">=</span><span class="c15">&quot;en&quot;</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c2">&lt;</span><span class="c7">head</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">meta</span><span class="c5">&nbsp;</span><span class="c10">charset</span><span class="c2">=</span><span class="c15">&quot;UTF-8&quot;</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">meta</span><span class="c5">&nbsp;</span><span class="c10">name</span><span class="c2">=</span><span class="c15">&quot;viewport&quot;</span><span class="c5">&nbsp;</span><span class="c10">content</span><span class="c2">=</span><span class="c15">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">title</span><span class="c2">&gt;</span><span class="c5">Engineered Chaos: The Cosmic Web</span><span class="c2">&lt;/</span><span class="c7">title</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">style</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c7">body</span><span class="c5">&nbsp;</span><span class="c3">{</span><span class="c5">&nbsp;</span><span class="c10">margin:</span><span class="c5">&nbsp;</span><span class="c13">0</span><span class="c3">;</span><span class="c5">&nbsp;</span><span class="c10">overflow:</span><span class="c5">&nbsp;</span><span class="c15">hidden</span><span class="c3">;</span><span class="c5">&nbsp;</span><span class="c10">background-color:</span><span class="c5">&nbsp;#000000</span><span class="c3">;</span><span class="c5">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c7">canvas</span><span class="c5">&nbsp;</span><span class="c3">{</span><span class="c5">&nbsp;</span><span class="c10">display:</span><span class="c5">&nbsp;</span><span class="c15">block</span><span class="c3">;</span><span class="c5">&nbsp;</span><span class="c0">}</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c7">#title</span><span class="c5">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">position:</span><span class="c5">&nbsp;</span><span class="c15">absolute</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">top:</span><span class="c5">&nbsp;</span><span class="c13">20px</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">left:</span><span class="c5">&nbsp;</span><span class="c13">50%</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">transform:</span><span class="c5">&nbsp;</span><span class="c15">translateX(</span><span class="c13">-50%</span><span class="c15">)</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">color:</span><span class="c5">&nbsp;#ffffff</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">font-family:</span><span class="c5">&nbsp;</span><span class="c14">&#39;Inter&#39;</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c15">sans-serif</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">font-size:</span><span class="c5">&nbsp;</span><span class="c13">24px</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">font-weight:</span><span class="c5">&nbsp;</span><span class="c13">300</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">letter-spacing:</span><span class="c5">&nbsp;</span><span class="c13">2px</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">text-shadow:</span><span class="c5">&nbsp;</span><span class="c13">0</span><span class="c5">&nbsp;</span><span class="c13">0</span><span class="c5">&nbsp;</span><span class="c13">15px</span><span class="c5">&nbsp;#ff80ff</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;/</span><span class="c7">style</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">link</span><span class="c5">&nbsp;</span><span class="c10">rel</span><span class="c2">=</span><span class="c15">&quot;preconnect&quot;</span><span class="c5">&nbsp;</span><span class="c10">href</span><span class="c2">=</span><span class="c15">&quot;https://fonts.googleapis.com&quot;</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">link</span><span class="c5">&nbsp;</span><span class="c10">rel</span><span class="c2">=</span><span class="c15">&quot;preconnect&quot;</span><span class="c5">&nbsp;</span><span class="c10">href</span><span class="c2">=</span><span class="c15">&quot;https://fonts.gstatic.com&quot;</span><span class="c5">&nbsp;</span><span class="c10">crossorigin</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">link</span><span class="c5">&nbsp;</span><span class="c10">href</span><span class="c2">=</span><span class="c15">&quot;https://fonts.googleapis.com/css2?family=Inter:wght@300&amp;display=swap&quot;</span><span class="c5">&nbsp;</span><span class="c10">rel</span><span class="c2">=</span><span class="c15">&quot;stylesheet&quot;</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c2">&lt;/</span><span class="c7">head</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c2">&lt;</span><span class="c7">body</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">div</span><span class="c5">&nbsp;</span><span class="c10">id</span><span class="c2">=</span><span class="c15">&quot;title&quot;</span><span class="c2">&gt;</span><span class="c5">The Cosmic Web</span><span class="c2">&lt;/</span><span class="c7">div</span><span class="c2 c6">&gt;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">script</span><span class="c5">&nbsp;</span><span class="c10">type</span><span class="c2">=</span><span class="c15">&quot;importmap&quot;</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;imports&quot;: {</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;three&quot;: &quot;https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;three/addons/&quot;: &quot;https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/&quot;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;/</span><span class="c7">script</span><span class="c2 c6">&gt;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c7">script</span><span class="c5">&nbsp;</span><span class="c10">type</span><span class="c2">=</span><span class="c15">&quot;module&quot;</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">import</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;as </span><span class="c12">THREE</span><span class="c5">&nbsp;</span><span class="c11">from</span><span class="c5">&nbsp;</span><span class="c14">&#39;three&#39;</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">import</span><span class="c5">&nbsp;</span><span class="c3">{</span><span class="c5">&nbsp;</span><span class="c12">OrbitControls</span><span class="c5">&nbsp;</span><span class="c3">}</span><span class="c5">&nbsp;</span><span class="c11">from</span><span class="c5">&nbsp;</span><span class="c14">&#39;three/addons/controls/OrbitControls.js&#39;</span><span class="c0">;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// --- Scene Setup ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;scene </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Scene</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;camera </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">PerspectiveCamera</span><span class="c3">(</span><span class="c8">75</span><span class="c3">,</span><span class="c5">&nbsp;window</span><span class="c3">.</span><span class="c5">innerWidth </span><span class="c3">/</span><span class="c5">&nbsp;window</span><span class="c3">.</span><span class="c5">innerHeight</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">0.1</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">2000</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; camera</span><span class="c3">.</span><span class="c5">position</span><span class="c3">.</span><span class="c11">set</span><span class="c3">(</span><span class="c8">0</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">50</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">150</span><span class="c0">);</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;renderer </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">WebGLRenderer</span><span class="c3">({</span><span class="c5">&nbsp;antialias</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c11">true</span><span class="c5">&nbsp;</span><span class="c0">});</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; renderer</span><span class="c3">.</span><span class="c5">setSize</span><span class="c3">(</span><span class="c5">window</span><span class="c3">.</span><span class="c5">innerWidth</span><span class="c3">,</span><span class="c5">&nbsp;window</span><span class="c3">.</span><span class="c5">innerHeight</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; renderer</span><span class="c3">.</span><span class="c5">setPixelRatio</span><span class="c3">(</span><span class="c5">window</span><span class="c3">.</span><span class="c5">devicePixelRatio</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; document</span><span class="c3">.</span><span class="c5">body</span><span class="c3">.</span><span class="c5">appendChild</span><span class="c3">(</span><span class="c5">renderer</span><span class="c3">.</span><span class="c5">domElement</span><span class="c0">);</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;controls </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">OrbitControls</span><span class="c3">(</span><span class="c5">camera</span><span class="c3">,</span><span class="c5">&nbsp;renderer</span><span class="c3">.</span><span class="c5">domElement</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c3">.</span><span class="c5">enableDamping </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">true</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c3">.</span><span class="c5">autoRotate </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">true</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c3">.</span><span class="c5">autoRotateSpeed </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">0.15</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c3">.</span><span class="c5">minDistance </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">50</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c3">.</span><span class="c5">maxDistance </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">300</span><span class="c0">;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// --- Cosmic Web Structure ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;</span><span class="c12">NODE_COUNT</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">15</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;nodes </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c0">[];</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;nodeGeometry </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">SphereGeometry</span><span class="c3">(</span><span class="c8">2</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">32</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">32</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;nodeMaterial </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">MeshBasicMaterial</span><span class="c3">({</span><span class="c5">&nbsp;color</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c20">0xffffff</span><span class="c3">,</span><span class="c5">&nbsp;transparent</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c11">true</span><span class="c3">,</span><span class="c5">&nbsp;opacity</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c8">0.5</span><span class="c5">&nbsp;</span><span class="c0">});</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;nodeGroup </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Group</span><span class="c0">();</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">for</span><span class="c5">&nbsp;</span><span class="c3">(</span><span class="c11">let</span><span class="c5">&nbsp;i </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">0</span><span class="c3">;</span><span class="c5">&nbsp;i </span><span class="c3">&lt;</span><span class="c5">&nbsp;</span><span class="c12">NODE_COUNT</span><span class="c3">;</span><span class="c5">&nbsp;i</span><span class="c3">++)</span><span class="c5">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;node </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Mesh</span><span class="c3">(</span><span class="c5">nodeGeometry</span><span class="c3">,</span><span class="c5">&nbsp;nodeMaterial</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node</span><span class="c3">.</span><span class="c5">position</span><span class="c3">.</span><span class="c11">set</span><span class="c0">(</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">(</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">-</span><span class="c5">&nbsp;</span><span class="c8">0.5</span><span class="c3">)</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">150</span><span class="c0">,</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">(</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">-</span><span class="c5">&nbsp;</span><span class="c8">0.5</span><span class="c3">)</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">150</span><span class="c0">,</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">(</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">-</span><span class="c5">&nbsp;</span><span class="c8">0.5</span><span class="c3">)</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8 c6">150</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes</span><span class="c3">.</span><span class="c5">push</span><span class="c3">(</span><span class="c5">node</span><span class="c3">.</span><span class="c5">position</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodeGroup</span><span class="c3">.</span><span class="c5">add</span><span class="c3">(</span><span class="c5">node</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; scene</span><span class="c3">.</span><span class="c5">add</span><span class="c3">(</span><span class="c5">nodeGroup</span><span class="c0">);</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// --- Particle System ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;</span><span class="c12">PARTICLE_COUNT</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">30000</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;geometry </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">BufferGeometry</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;positions </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">Float32Array</span><span class="c3">(</span><span class="c12">PARTICLE_COUNT</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;colors </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">Float32Array</span><span class="c3">(</span><span class="c12">PARTICLE_COUNT</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;particleStates </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c0">[];</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// --- Initialization ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">for</span><span class="c5">&nbsp;</span><span class="c3">(</span><span class="c11">let</span><span class="c5">&nbsp;i </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">0</span><span class="c3">;</span><span class="c5">&nbsp;i </span><span class="c3">&lt;</span><span class="c5">&nbsp;</span><span class="c12">PARTICLE_COUNT</span><span class="c3">;</span><span class="c5">&nbsp;i</span><span class="c3">++)</span><span class="c5">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;startNode </span><span class="c3">=</span><span class="c5">&nbsp;nodes</span><span class="c3">[</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">floor</span><span class="c3">(</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c12">NODE_COUNT</span><span class="c0">)];</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;endNode </span><span class="c3">=</span><span class="c5">&nbsp;nodes</span><span class="c3">[</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">floor</span><span class="c3">(</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c12">NODE_COUNT</span><span class="c0">)];</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; positions</span><span class="c3">[</span><span class="c5">i </span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;startNode</span><span class="c3">.</span><span class="c5">x</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; positions</span><span class="c3">[</span><span class="c5">i </span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c5">&nbsp;</span><span class="c3">+</span><span class="c5">&nbsp;</span><span class="c8">1</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;startNode</span><span class="c3">.</span><span class="c5">y</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; positions</span><span class="c3">[</span><span class="c5">i </span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c5">&nbsp;</span><span class="c3">+</span><span class="c5">&nbsp;</span><span class="c8">2</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;startNode</span><span class="c3">.</span><span class="c5">z</span><span class="c0">;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particleStates</span><span class="c3">.</span><span class="c5">push</span><span class="c0">({</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; startNode</span><span class="c3">:</span><span class="c5">&nbsp;startNode</span><span class="c3">.</span><span class="c5">clone</span><span class="c0">(),</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; endNode</span><span class="c3">:</span><span class="c5">&nbsp;endNode</span><span class="c3">.</span><span class="c5">clone</span><span class="c0">(),</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; progress</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">(),</span><span class="c5">&nbsp;</span><span class="c16 c6">// Start at a random point along the path</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; speed</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c8">0.001</span><span class="c5">&nbsp;</span><span class="c3">+</span><span class="c5">&nbsp;</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">0.002</span><span class="c0">,</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chaos</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">2</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c12">Math</span><span class="c3">.</span><span class="c12">PI</span><span class="c5">&nbsp;</span><span class="c16 c6">// Initial chaos phase</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c3">.</span><span class="c5">setAttribute</span><span class="c3">(</span><span class="c14">&#39;position&#39;</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">BufferAttribute</span><span class="c3">(</span><span class="c5">positions</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c0">));</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c3">.</span><span class="c5">setAttribute</span><span class="c3">(</span><span class="c14">&#39;color&#39;</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">BufferAttribute</span><span class="c3">(</span><span class="c5">colors</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c0">));</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;material </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">PointsMaterial</span><span class="c0">({</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c8">0.3</span><span class="c0">,</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vertexColors</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c11">true</span><span class="c0">,</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blending</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">AdditiveBlending</span><span class="c0">,</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depthWrite</span><span class="c3">:</span><span class="c5">&nbsp;</span><span class="c11 c6">false</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;points </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Points</span><span class="c3">(</span><span class="c5">geometry</span><span class="c3">,</span><span class="c5">&nbsp;material</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; scene</span><span class="c3">.</span><span class="c5">add</span><span class="c3">(</span><span class="c5">points</span><span class="c0">);</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// --- Animation Loop ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;clock </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Clock</span><span class="c0">();</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">function</span><span class="c5">&nbsp;animate</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; requestAnimationFrame</span><span class="c3">(</span><span class="c5">animate</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c3">.</span><span class="c5">update</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;elapsedTime </span><span class="c3">=</span><span class="c5">&nbsp;clock</span><span class="c3">.</span><span class="c5">getElapsedTime</span><span class="c0">();</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;currentPositions </span><span class="c3">=</span><span class="c5">&nbsp;geometry</span><span class="c3">.</span><span class="c5">attributes</span><span class="c3">.</span><span class="c5">position</span><span class="c3">.</span><span class="c5">array</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;currentColors </span><span class="c3">=</span><span class="c5">&nbsp;geometry</span><span class="c3">.</span><span class="c5">attributes</span><span class="c3">.</span><span class="c5">color</span><span class="c3">.</span><span class="c5">array</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;color </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Color</span><span class="c0">();</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">for</span><span class="c5">&nbsp;</span><span class="c3">(</span><span class="c11">let</span><span class="c5">&nbsp;i </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">0</span><span class="c3">;</span><span class="c5">&nbsp;i </span><span class="c3">&lt;</span><span class="c5">&nbsp;</span><span class="c12">PARTICLE_COUNT</span><span class="c3">;</span><span class="c5">&nbsp;i</span><span class="c3">++)</span><span class="c5">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;state </span><span class="c3">=</span><span class="c5">&nbsp;particleStates</span><span class="c3">[</span><span class="c5">i</span><span class="c0">];</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6 c16">// --- Motion along Filaments ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state</span><span class="c3">.</span><span class="c5">progress </span><span class="c3">+=</span><span class="c5">&nbsp;state</span><span class="c3">.</span><span class="c5">speed</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">if</span><span class="c5">&nbsp;</span><span class="c3">(</span><span class="c5">state</span><span class="c3">.</span><span class="c5">progress </span><span class="c3">&gt;=</span><span class="c5">&nbsp;</span><span class="c8">1.0</span><span class="c3">)</span><span class="c5">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state</span><span class="c3">.</span><span class="c5">progress </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">0</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// Move to a new path</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state</span><span class="c3">.</span><span class="c5">startNode </span><span class="c3">=</span><span class="c5">&nbsp;state</span><span class="c3">.</span><span class="c5">endNode</span><span class="c3">.</span><span class="c5">clone</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state</span><span class="c3">.</span><span class="c5">endNode </span><span class="c3">=</span><span class="c5">&nbsp;nodes</span><span class="c3">[</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">floor</span><span class="c3">(</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">random</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c12">NODE_COUNT</span><span class="c3">)].</span><span class="c5">clone</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;i3 </span><span class="c3">=</span><span class="c5">&nbsp;i </span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">3</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;pos </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Vector3</span><span class="c3">().</span><span class="c5">lerpVectors</span><span class="c3">(</span><span class="c5">state</span><span class="c3">.</span><span class="c5">startNode</span><span class="c3">,</span><span class="c5">&nbsp;state</span><span class="c3">.</span><span class="c5">endNode</span><span class="c3">,</span><span class="c5">&nbsp;state</span><span class="c3">.</span><span class="c5">progress</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// --- Apply Coherent Chaos ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// The chaos is now a synchronized wave, not random noise</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;chaos_amplitude </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">2.0</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;chaos_frequency </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">3.0</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;wave </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">sin</span><span class="c3">(</span><span class="c5">state</span><span class="c3">.</span><span class="c5">progress </span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c12">Math</span><span class="c3">.</span><span class="c12">PI</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;chaos_frequency </span><span class="c3">+</span><span class="c5">&nbsp;elapsedTime </span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">0.5</span><span class="c0">);</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// Use a perpendicular vector for displacement to create a &quot;swirl&quot;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;tangent </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Vector3</span><span class="c3">().</span><span class="c5">subVectors</span><span class="c3">(</span><span class="c5">state</span><span class="c3">.</span><span class="c5">endNode</span><span class="c3">,</span><span class="c5">&nbsp;state</span><span class="c3">.</span><span class="c5">startNode</span><span class="c3">).</span><span class="c5">normalize</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;perpendicular </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">new</span><span class="c5">&nbsp;</span><span class="c12">THREE</span><span class="c3">.</span><span class="c12">Vector3</span><span class="c3">(</span><span class="c5">tangent</span><span class="c3">.</span><span class="c5">y</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c3">-</span><span class="c5">tangent</span><span class="c3">.</span><span class="c5">x</span><span class="c3">,</span><span class="c5">&nbsp;tangent</span><span class="c3">.</span><span class="c5">z</span><span class="c3">).</span><span class="c5">normalize</span><span class="c0">();</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pos</span><span class="c3">.</span><span class="c5">add</span><span class="c3">(</span><span class="c5">perpendicular</span><span class="c3">.</span><span class="c5">multiplyScalar</span><span class="c3">(</span><span class="c5">wave </span><span class="c3">*</span><span class="c5">&nbsp;chaos_amplitude</span><span class="c0">));</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentPositions</span><span class="c3">[</span><span class="c5">i3</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;pos</span><span class="c3">.</span><span class="c5">x</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentPositions</span><span class="c3">[</span><span class="c5">i3</span><span class="c3">+</span><span class="c8">1</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;pos</span><span class="c3">.</span><span class="c5">y</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentPositions</span><span class="c3">[</span><span class="c5">i3</span><span class="c3">+</span><span class="c8">2</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;pos</span><span class="c3">.</span><span class="c5">z</span><span class="c0">;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c16 c6">// --- Color based on flow and state ---</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;hue </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">0.6</span><span class="c5">&nbsp;</span><span class="c3">+</span><span class="c5">&nbsp;</span><span class="c3">(</span><span class="c5">wave </span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">0.1</span><span class="c3">);</span><span class="c5">&nbsp;</span><span class="c16 c6">// Shifts between blue and purple</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">const</span><span class="c5">&nbsp;lightness </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c8">0.5</span><span class="c5">&nbsp;</span><span class="c3">+</span><span class="c5">&nbsp;</span><span class="c12">Math</span><span class="c3">.</span><span class="c5">abs</span><span class="c3">(</span><span class="c5">wave</span><span class="c3">)</span><span class="c5">&nbsp;</span><span class="c3">*</span><span class="c5">&nbsp;</span><span class="c8">0.3</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color</span><span class="c3">.</span><span class="c5">setHSL</span><span class="c3">(</span><span class="c5">hue</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c8">1.0</span><span class="c3">,</span><span class="c5">&nbsp;lightness</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentColors</span><span class="c3">[</span><span class="c5">i3</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;color</span><span class="c3">.</span><span class="c5">r</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentColors</span><span class="c3">[</span><span class="c5">i3</span><span class="c3">+</span><span class="c8">1</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;color</span><span class="c3">.</span><span class="c5">g</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentColors</span><span class="c3">[</span><span class="c5">i3</span><span class="c3">+</span><span class="c8">2</span><span class="c3">]</span><span class="c5">&nbsp;</span><span class="c3">=</span><span class="c5">&nbsp;color</span><span class="c3">.</span><span class="c5">b</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c3">.</span><span class="c5">attributes</span><span class="c3">.</span><span class="c5">position</span><span class="c3">.</span><span class="c5">needsUpdate </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">true</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c3">.</span><span class="c5">attributes</span><span class="c3">.</span><span class="c5">color</span><span class="c3">.</span><span class="c5">needsUpdate </span><span class="c3">=</span><span class="c5">&nbsp;</span><span class="c11">true</span><span class="c0">;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderer</span><span class="c3">.</span><span class="c5">render</span><span class="c3">(</span><span class="c5">scene</span><span class="c3">,</span><span class="c5">&nbsp;camera</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; window</span><span class="c3">.</span><span class="c5">addEventListener</span><span class="c3">(</span><span class="c14">&#39;resize&#39;</span><span class="c3">,</span><span class="c5">&nbsp;</span><span class="c3">()</span><span class="c5">&nbsp;</span><span class="c3">=&gt;</span><span class="c5">&nbsp;</span><span class="c0">{</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; camera</span><span class="c3">.</span><span class="c5">aspect </span><span class="c3">=</span><span class="c5">&nbsp;window</span><span class="c3">.</span><span class="c5">innerWidth </span><span class="c3">/</span><span class="c5">&nbsp;window</span><span class="c3">.</span><span class="c5">innerHeight</span><span class="c0">;</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; camera</span><span class="c3">.</span><span class="c5">updateProjectionMatrix</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderer</span><span class="c3">.</span><span class="c5">setSize</span><span class="c3">(</span><span class="c5">window</span><span class="c3">.</span><span class="c5">innerWidth</span><span class="c3">,</span><span class="c5">&nbsp;window</span><span class="c3">.</span><span class="c5">innerHeight</span><span class="c0">);</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">});</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c1"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; animate</span><span class="c0">();</span></p><p class="c1"><span class="c5">&nbsp; &nbsp; </span><span class="c2">&lt;/</span><span class="c7">script</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c2">&lt;/</span><span class="c7">body</span><span class="c2 c6">&gt;</span></p><p class="c1"><span class="c2">&lt;/</span><span class="c7">html</span><span class="c2 c6">&gt;</span></p><p class="c1 c9"><span class="c4"></span></p><p class="c9 c19"><span class="c6 c17"></span></p></body></html>