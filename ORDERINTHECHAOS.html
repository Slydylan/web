<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw);ol{margin:0;padding:0}table td,table th{padding:0}.c2{color:#dcdcdc;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:"Consolas";font-style:normal}.c3{background-color:#1e1f20;padding-top:0pt;padding-bottom:0pt;line-height:1.3571428571428572;orphans:2;widows:2;text-align:left}.c17{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c11{font-size:10.5pt;font-family:"Consolas";color:#fa903e;font-weight:400}.c10{font-size:10.5pt;font-family:"Consolas";color:#9cdcfe;font-weight:400}.c18{color:#000000;font-weight:400;font-size:11pt;font-family:"Arial"}.c1{font-size:10.5pt;font-family:"Consolas";color:#808080;font-weight:400}.c7{font-size:10.5pt;font-family:"Consolas";color:#dcdcdc;font-weight:400}.c14{font-size:10.5pt;font-family:"Consolas";color:#b5cea8;font-weight:400}.c5{font-size:10.5pt;font-family:"Consolas";color:#c58af9;font-weight:400}.c13{font-size:10.5pt;font-family:"Consolas";color:#ce9178;font-weight:400}.c15{font-size:10.5pt;font-family:"Consolas";color:#81c995;font-weight:400}.c4{font-size:10.5pt;font-family:"Consolas";color:#3dc9b0;font-weight:400}.c12{color:#80868b;font-weight:400;font-size:10.5pt;font-family:"Consolas"}.c0{font-size:10.5pt;font-family:"Consolas";color:#d4d4d4;font-weight:400}.c6{font-size:10.5pt;font-family:"Consolas";color:#569cd6;font-weight:400}.c16{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c9{text-decoration:none;vertical-align:baseline;font-style:normal}.c8{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c16 doc-content"><p class="c3"><span class="c6">&lt;!DOCTYPE</span><span class="c10">&nbsp;html</span><span class="c6 c9">&gt;</span></p><p class="c3"><span class="c1">&lt;</span><span class="c6">html</span><span class="c0">&nbsp;</span><span class="c10">lang</span><span class="c1">=</span><span class="c13">&quot;en&quot;</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c1">&lt;</span><span class="c6">head</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">meta</span><span class="c0">&nbsp;</span><span class="c10">charset</span><span class="c1">=</span><span class="c13">&quot;UTF-8&quot;</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">meta</span><span class="c0">&nbsp;</span><span class="c10">name</span><span class="c1">=</span><span class="c13">&quot;viewport&quot;</span><span class="c0">&nbsp;</span><span class="c10">content</span><span class="c1">=</span><span class="c13">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">title</span><span class="c1">&gt;</span><span class="c0">Engineered Chaos: The First Structure</span><span class="c1">&lt;/</span><span class="c6">title</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">style</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6">body</span><span class="c0">&nbsp;</span><span class="c7">{</span><span class="c0">&nbsp;</span><span class="c10">margin:</span><span class="c0">&nbsp;</span><span class="c14">0</span><span class="c7">;</span><span class="c0">&nbsp;</span><span class="c10">overflow:</span><span class="c0">&nbsp;</span><span class="c13">hidden</span><span class="c7">;</span><span class="c0">&nbsp;</span><span class="c10">background-color:</span><span class="c0">&nbsp;#00050a</span><span class="c7">;</span><span class="c0">&nbsp;</span><span class="c2">}</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6">canvas</span><span class="c0">&nbsp;</span><span class="c7">{</span><span class="c0">&nbsp;</span><span class="c10">display:</span><span class="c0">&nbsp;</span><span class="c13">block</span><span class="c7">;</span><span class="c0">&nbsp;</span><span class="c2">}</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6">#title</span><span class="c0">&nbsp;</span><span class="c2">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">position:</span><span class="c0">&nbsp;</span><span class="c13">absolute</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">top:</span><span class="c0">&nbsp;</span><span class="c14">20px</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">left:</span><span class="c0">&nbsp;</span><span class="c14">50%</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">transform:</span><span class="c0">&nbsp;</span><span class="c13">translateX(</span><span class="c14">-50%</span><span class="c13">)</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">color:</span><span class="c0">&nbsp;#ffffff</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">font-family:</span><span class="c0">&nbsp;</span><span class="c15">&#39;Inter&#39;</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c13">sans-serif</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">font-size:</span><span class="c0">&nbsp;</span><span class="c14">24px</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">font-weight:</span><span class="c0">&nbsp;</span><span class="c14">300</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">letter-spacing:</span><span class="c0">&nbsp;</span><span class="c14">2px</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10">text-shadow:</span><span class="c0">&nbsp;</span><span class="c14">0</span><span class="c0">&nbsp;</span><span class="c14">0</span><span class="c0">&nbsp;</span><span class="c14">10px</span><span class="c0">&nbsp;#00bfff</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">}</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;/</span><span class="c6">style</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">link</span><span class="c0">&nbsp;</span><span class="c10">rel</span><span class="c1">=</span><span class="c13">&quot;preconnect&quot;</span><span class="c0">&nbsp;</span><span class="c10">href</span><span class="c1">=</span><span class="c13">&quot;https://fonts.googleapis.com&quot;</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">link</span><span class="c0">&nbsp;</span><span class="c10">rel</span><span class="c1">=</span><span class="c13">&quot;preconnect&quot;</span><span class="c0">&nbsp;</span><span class="c10">href</span><span class="c1">=</span><span class="c13">&quot;https://fonts.gstatic.com&quot;</span><span class="c0">&nbsp;</span><span class="c10">crossorigin</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">link</span><span class="c0">&nbsp;</span><span class="c10">href</span><span class="c1">=</span><span class="c13">&quot;https://fonts.googleapis.com/css2?family=Inter:wght@300&amp;display=swap&quot;</span><span class="c0">&nbsp;</span><span class="c10">rel</span><span class="c1">=</span><span class="c13">&quot;stylesheet&quot;</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c1">&lt;/</span><span class="c6">head</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c1">&lt;</span><span class="c6">body</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">div</span><span class="c0">&nbsp;</span><span class="c10">id</span><span class="c1">=</span><span class="c13">&quot;title&quot;</span><span class="c1">&gt;</span><span class="c0">The First Structure</span><span class="c1">&lt;/</span><span class="c6">div</span><span class="c1 c9">&gt;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">script</span><span class="c0">&nbsp;</span><span class="c10">type</span><span class="c1">=</span><span class="c13">&quot;importmap&quot;</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;imports&quot;: {</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;three&quot;: &quot;https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js&quot;,</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;three/addons/&quot;: &quot;https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/&quot;</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;/</span><span class="c6">script</span><span class="c1 c9">&gt;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;</span><span class="c6">script</span><span class="c0">&nbsp;</span><span class="c10">type</span><span class="c1">=</span><span class="c13">&quot;module&quot;</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">import</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;as </span><span class="c4">THREE</span><span class="c0">&nbsp;</span><span class="c5">from</span><span class="c0">&nbsp;</span><span class="c15">&#39;three&#39;</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">import</span><span class="c0">&nbsp;</span><span class="c7">{</span><span class="c0">&nbsp;</span><span class="c4">OrbitControls</span><span class="c0">&nbsp;</span><span class="c7">}</span><span class="c0">&nbsp;</span><span class="c5">from</span><span class="c0">&nbsp;</span><span class="c15">&#39;three/addons/controls/OrbitControls.js&#39;</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Scene Setup ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;scene </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Scene</span><span class="c2">();</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;camera </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">PerspectiveCamera</span><span class="c7">(</span><span class="c11">75</span><span class="c7">,</span><span class="c0">&nbsp;window</span><span class="c7">.</span><span class="c0">innerWidth </span><span class="c7">/</span><span class="c0">&nbsp;window</span><span class="c7">.</span><span class="c0">innerHeight</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">0.1</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">1000</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; camera</span><span class="c7">.</span><span class="c0">position</span><span class="c7">.</span><span class="c5">set</span><span class="c7">(</span><span class="c11">0</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">20</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">70</span><span class="c2">);</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;renderer </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">WebGLRenderer</span><span class="c7">({</span><span class="c0">&nbsp;antialias</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c5">true</span><span class="c0">&nbsp;</span><span class="c2">});</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; renderer</span><span class="c7">.</span><span class="c0">setSize</span><span class="c7">(</span><span class="c0">window</span><span class="c7">.</span><span class="c0">innerWidth</span><span class="c7">,</span><span class="c0">&nbsp;window</span><span class="c7">.</span><span class="c0">innerHeight</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document</span><span class="c7">.</span><span class="c0">body</span><span class="c7">.</span><span class="c0">appendChild</span><span class="c7">(</span><span class="c0">renderer</span><span class="c7">.</span><span class="c0">domElement</span><span class="c2">);</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;controls </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">OrbitControls</span><span class="c7">(</span><span class="c0">camera</span><span class="c7">,</span><span class="c0">&nbsp;renderer</span><span class="c7">.</span><span class="c0">domElement</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c7">.</span><span class="c0">enableDamping </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">true</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c7">.</span><span class="c0">autoRotate </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">true</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c7">.</span><span class="c0">autoRotateSpeed </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">0.2</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Particle System ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;</span><span class="c4">PARTICLE_COUNT</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">20000</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;geometry </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">BufferGeometry</span><span class="c2">();</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;positions </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">Float32Array</span><span class="c7">(</span><span class="c4">PARTICLE_COUNT</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;colors </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">Float32Array</span><span class="c7">(</span><span class="c4">PARTICLE_COUNT</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;particleStates </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c7">[];</span><span class="c0">&nbsp;</span><span class="c12 c9">// To store [V_t, K_t] for each particle</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Fibonacci &amp; Chaos Parameters ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;</span><span class="c4">FIBONACCI_SEQUENCE</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;generateFibonacciList</span><span class="c7">(</span><span class="c11">20</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;</span><span class="c4">TARGET_CENTER</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">0.97</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;</span><span class="c4">TARGET_RADIUS</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">0.02</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Torus Parameters ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;torusRadius </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">30</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;tubeRadius </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">12</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">function</span><span class="c0">&nbsp;generateFibonacciList</span><span class="c7">(</span><span class="c0">n</span><span class="c7">)</span><span class="c0">&nbsp;</span><span class="c2">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;list </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c7">[</span><span class="c11">0</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">1</span><span class="c2">];</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">while</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c0">list</span><span class="c7">.</span><span class="c0">length </span><span class="c7">&lt;</span><span class="c0">&nbsp;n </span><span class="c7">+</span><span class="c0">&nbsp;</span><span class="c11">2</span><span class="c7">)</span><span class="c0">&nbsp;list</span><span class="c7">.</span><span class="c0">push</span><span class="c7">(</span><span class="c0">list</span><span class="c7">[</span><span class="c0">list</span><span class="c7">.</span><span class="c0">length </span><span class="c7">-</span><span class="c0">&nbsp;</span><span class="c11">1</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">+</span><span class="c0">&nbsp;list</span><span class="c7">[</span><span class="c0">list</span><span class="c7">.</span><span class="c0">length </span><span class="c7">-</span><span class="c0">&nbsp;</span><span class="c11">2</span><span class="c2">]);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">return</span><span class="c0">&nbsp;list</span><span class="c7">.</span><span class="c0">slice</span><span class="c7">(</span><span class="c11">2</span><span class="c7">).</span><span class="c0">map</span><span class="c7">(</span><span class="c4">Number</span><span class="c7">);</span><span class="c0">&nbsp;</span><span class="c12 c9">// Ensure they are numbers</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">}</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Initialization ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">for</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c5">let</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">0</span><span class="c7">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c4">PARTICLE_COUNT</span><span class="c7">;</span><span class="c0">&nbsp;i</span><span class="c7">++)</span><span class="c0">&nbsp;</span><span class="c2">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// Give each particle a base position on the torus</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;u </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">random</span><span class="c7">()</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">2</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c4">PI</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;v </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">random</span><span class="c7">()</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">2</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c4">PI</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;x </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c0">torusRadius </span><span class="c7">+</span><span class="c0">&nbsp;tubeRadius </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">cos</span><span class="c7">(</span><span class="c0">v</span><span class="c7">))</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">cos</span><span class="c7">(</span><span class="c0">u</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;y </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c0">torusRadius </span><span class="c7">+</span><span class="c0">&nbsp;tubeRadius </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">cos</span><span class="c7">(</span><span class="c0">v</span><span class="c7">))</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">sin</span><span class="c7">(</span><span class="c0">u</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;z </span><span class="c7">=</span><span class="c0">&nbsp;tubeRadius </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">sin</span><span class="c7">(</span><span class="c0">v</span><span class="c2">);</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; positions</span><span class="c7">[</span><span class="c0">i </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;x</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; positions</span><span class="c7">[</span><span class="c0">i </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c0">&nbsp;</span><span class="c7">+</span><span class="c0">&nbsp;</span><span class="c11">1</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;y</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; positions</span><span class="c7">[</span><span class="c0">i </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c0">&nbsp;</span><span class="c7">+</span><span class="c0">&nbsp;</span><span class="c11">2</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;z</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// Initialize state for the Autonomic Chaos algorithm</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particleStates</span><span class="c7">.</span><span class="c0">push</span><span class="c2">({</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; basePosition</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Vector3</span><span class="c7">(</span><span class="c0">x</span><span class="c7">,</span><span class="c0">&nbsp;y</span><span class="c7">,</span><span class="c0">&nbsp;z</span><span class="c2">),</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">random</span><span class="c7">(),</span><span class="c0">&nbsp;</span><span class="c12 c9">// V_t</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chaosLevel</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c11">5</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c12 c9">// K_t (index for Fibonacci)</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; velocity</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Vector3</span><span class="c2">()</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">});</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">}</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c7">.</span><span class="c0">setAttribute</span><span class="c7">(</span><span class="c15">&#39;position&#39;</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">BufferAttribute</span><span class="c7">(</span><span class="c0">positions</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c2">));</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c7">.</span><span class="c0">setAttribute</span><span class="c7">(</span><span class="c15">&#39;color&#39;</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">BufferAttribute</span><span class="c7">(</span><span class="c0">colors</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c2">));</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;material </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">PointsMaterial</span><span class="c2">({</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c11">0.2</span><span class="c2">,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vertexColors</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c5">true</span><span class="c2">,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blending</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">AdditiveBlending</span><span class="c2">,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depthWrite</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c5 c9">false</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">});</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;points </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Points</span><span class="c7">(</span><span class="c0">geometry</span><span class="c7">,</span><span class="c0">&nbsp;material</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; scene</span><span class="c7">.</span><span class="c0">add</span><span class="c7">(</span><span class="c0">points</span><span class="c2">);</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Animation Loop ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;clock </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Clock</span><span class="c2">();</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">function</span><span class="c0">&nbsp;animate</span><span class="c7">()</span><span class="c0">&nbsp;</span><span class="c2">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; requestAnimationFrame</span><span class="c7">(</span><span class="c0">animate</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; controls</span><span class="c7">.</span><span class="c0">update</span><span class="c2">();</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;delta </span><span class="c7">=</span><span class="c0">&nbsp;clock</span><span class="c7">.</span><span class="c0">getDelta</span><span class="c2">();</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;currentPositions </span><span class="c7">=</span><span class="c0">&nbsp;geometry</span><span class="c7">.</span><span class="c0">attributes</span><span class="c7">.</span><span class="c0">position</span><span class="c7">.</span><span class="c0">array</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;currentColors </span><span class="c7">=</span><span class="c0">&nbsp;geometry</span><span class="c7">.</span><span class="c0">attributes</span><span class="c7">.</span><span class="c0">color</span><span class="c7">.</span><span class="c0">array</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;color </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Color</span><span class="c2">();</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c9 c12">// Update each particle based on the chaos algorithm</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">for</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c5">let</span><span class="c0">&nbsp;i </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c11">0</span><span class="c7">;</span><span class="c0">&nbsp;i </span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c4">PARTICLE_COUNT</span><span class="c7">;</span><span class="c0">&nbsp;i</span><span class="c7">++)</span><span class="c0">&nbsp;</span><span class="c2">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;state </span><span class="c7">=</span><span class="c0">&nbsp;particleStates</span><span class="c7">[</span><span class="c0">i</span><span class="c2">];</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Autonomic Chaos Algorithm ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;</span><span class="c4">V_prev</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;state</span><span class="c7">.</span><span class="c0">value</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;</span><span class="c4">K_prev</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;state</span><span class="c7">.</span><span class="c0">chaosLevel</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// 1. Action Rule</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;fib_val </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c4">FIBONACCI_SEQUENCE</span><span class="c7">[</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">max</span><span class="c7">(</span><span class="c11">0</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">min</span><span class="c7">(</span><span class="c4">K_prev</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c4">FIBONACCI_SEQUENCE</span><span class="c7">.</span><span class="c0">length </span><span class="c7">-</span><span class="c0">&nbsp;</span><span class="c11">1</span><span class="c2">))];</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;chaos_term </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">sin</span><span class="c7">(</span><span class="c4">Math</span><span class="c7">.</span><span class="c4">PI</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">V_prev</span><span class="c7">)</span><span class="c0">&nbsp;</span><span class="c7">/</span><span class="c0">&nbsp;fib_val</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;</span><span class="c4">V_t</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c4">V_prev</span><span class="c0">&nbsp;</span><span class="c7">+</span><span class="c0">&nbsp;chaos_term </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">0.1</span><span class="c7">;</span><span class="c0">&nbsp;</span><span class="c12 c9">// Apply the update</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state</span><span class="c7">.</span><span class="c0">value </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c4">V_t</span><span class="c0">&nbsp;</span><span class="c7">+</span><span class="c0">&nbsp;</span><span class="c11">1</span><span class="c7">)</span><span class="c0">&nbsp;</span><span class="c7">%</span><span class="c0">&nbsp;</span><span class="c11">1</span><span class="c7">;</span><span class="c0">&nbsp;</span><span class="c12 c9">// Keep value between 0 and 1</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// 2. Regulation Rule (Simplified for aesthetics)</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// This is a simplified version of our previous rule to keep the chaos dynamic</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">if</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">random</span><span class="c7">()</span><span class="c0">&nbsp;</span><span class="c7">&lt;</span><span class="c0">&nbsp;</span><span class="c11">0.001</span><span class="c7">)</span><span class="c0">&nbsp;</span><span class="c2">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state</span><span class="c7">.</span><span class="c0">chaosLevel </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">max</span><span class="c7">(</span><span class="c11">2</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">min</span><span class="c7">(</span><span class="c11">15</span><span class="c7">,</span><span class="c0">&nbsp;state</span><span class="c7">.</span><span class="c0">chaosLevel </span><span class="c7">+</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">random</span><span class="c7">()</span><span class="c0">&nbsp;</span><span class="c7">&gt;</span><span class="c0">&nbsp;</span><span class="c11">0.5</span><span class="c0">&nbsp;</span><span class="c7">?</span><span class="c0">&nbsp;</span><span class="c11">1</span><span class="c0">&nbsp;</span><span class="c7">:</span><span class="c0">&nbsp;</span><span class="c7">-</span><span class="c11">1</span><span class="c2">)));</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">}</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Map Chaos to Motion ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;i3 </span><span class="c7">=</span><span class="c0">&nbsp;i </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">3</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;pos </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Vector3</span><span class="c7">(</span><span class="c0">currentPositions</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">],</span><span class="c0">&nbsp;currentPositions</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">+</span><span class="c11">1</span><span class="c7">],</span><span class="c0">&nbsp;currentPositions</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">+</span><span class="c11">2</span><span class="c2">]);</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// Create a chaotic force vector</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;force </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">new</span><span class="c0">&nbsp;</span><span class="c4">THREE</span><span class="c7">.</span><span class="c4">Vector3</span><span class="c2">(</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">Math</span><span class="c7">.</span><span class="c0">sin</span><span class="c7">(</span><span class="c4">V_t</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c4">PI</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">4</span><span class="c2">),</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">Math</span><span class="c7">.</span><span class="c0">cos</span><span class="c7">(</span><span class="c4">V_t</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c4">PI</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">6</span><span class="c2">),</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">Math</span><span class="c7">.</span><span class="c0">sin</span><span class="c7">(</span><span class="c4">V_t</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c4">PI</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">2</span><span class="c2">)</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c7">).</span><span class="c0">multiplyScalar</span><span class="c7">(</span><span class="c11">0.5</span><span class="c2">);</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// Pull back towards the base position on the torus</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5">const</span><span class="c0">&nbsp;pull </span><span class="c7">=</span><span class="c0">&nbsp;state</span><span class="c7">.</span><span class="c0">basePosition</span><span class="c7">.</span><span class="c0">clone</span><span class="c7">().</span><span class="c0">sub</span><span class="c7">(</span><span class="c0">pos</span><span class="c7">).</span><span class="c0">multiplyScalar</span><span class="c7">(</span><span class="c11">0.01</span><span class="c2">);</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state</span><span class="c7">.</span><span class="c0">velocity</span><span class="c7">.</span><span class="c0">add</span><span class="c7">(</span><span class="c0">force</span><span class="c7">).</span><span class="c0">add</span><span class="c7">(</span><span class="c0">pull</span><span class="c7">).</span><span class="c0">multiplyScalar</span><span class="c7">(</span><span class="c11">0.95</span><span class="c7">);</span><span class="c0">&nbsp;</span><span class="c12 c9">// Apply force and damping</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pos</span><span class="c7">.</span><span class="c0">add</span><span class="c7">(</span><span class="c0">state</span><span class="c7">.</span><span class="c0">velocity</span><span class="c7">.</span><span class="c0">clone</span><span class="c7">().</span><span class="c0">multiplyScalar</span><span class="c7">(</span><span class="c0">delta </span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">60</span><span class="c2">));</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentPositions</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;pos</span><span class="c7">.</span><span class="c0">x</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentPositions</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">+</span><span class="c11">1</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;pos</span><span class="c7">.</span><span class="c0">y</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentPositions</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">+</span><span class="c11">2</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;pos</span><span class="c7">.</span><span class="c0">z</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c9">// --- Map Chaos to Color ---</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color</span><span class="c7">.</span><span class="c0">setHSL</span><span class="c7">(</span><span class="c11">0.5</span><span class="c0">&nbsp;</span><span class="c7">+</span><span class="c0">&nbsp;</span><span class="c4">V_t</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">0.2</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">1.0</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c11">0.5</span><span class="c0">&nbsp;</span><span class="c7">+</span><span class="c0">&nbsp;</span><span class="c7">(</span><span class="c4">Math</span><span class="c7">.</span><span class="c0">sin</span><span class="c7">(</span><span class="c4">V_t</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c4">Math</span><span class="c7">.</span><span class="c4">PI</span><span class="c7">)</span><span class="c0">&nbsp;</span><span class="c7">*</span><span class="c0">&nbsp;</span><span class="c11">0.2</span><span class="c2">));</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentColors</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;color</span><span class="c7">.</span><span class="c0">r</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentColors</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">+</span><span class="c11">1</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;color</span><span class="c7">.</span><span class="c0">g</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentColors</span><span class="c7">[</span><span class="c0">i3</span><span class="c7">+</span><span class="c11">2</span><span class="c7">]</span><span class="c0">&nbsp;</span><span class="c7">=</span><span class="c0">&nbsp;color</span><span class="c7">.</span><span class="c0">b</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">}</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c7">.</span><span class="c0">attributes</span><span class="c7">.</span><span class="c0">position</span><span class="c7">.</span><span class="c0">needsUpdate </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">true</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; geometry</span><span class="c7">.</span><span class="c0">attributes</span><span class="c7">.</span><span class="c0">color</span><span class="c7">.</span><span class="c0">needsUpdate </span><span class="c7">=</span><span class="c0">&nbsp;</span><span class="c5">true</span><span class="c2">;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderer</span><span class="c7">.</span><span class="c0">render</span><span class="c7">(</span><span class="c0">scene</span><span class="c7">,</span><span class="c0">&nbsp;camera</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">}</span></p><p class="c3"><span class="c0 c9">&nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; window</span><span class="c7">.</span><span class="c0">addEventListener</span><span class="c7">(</span><span class="c15">&#39;resize&#39;</span><span class="c7">,</span><span class="c0">&nbsp;</span><span class="c7">()</span><span class="c0">&nbsp;</span><span class="c7">=&gt;</span><span class="c0">&nbsp;</span><span class="c2">{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; camera</span><span class="c7">.</span><span class="c0">aspect </span><span class="c7">=</span><span class="c0">&nbsp;window</span><span class="c7">.</span><span class="c0">innerWidth </span><span class="c7">/</span><span class="c0">&nbsp;window</span><span class="c7">.</span><span class="c0">innerHeight</span><span class="c2">;</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; camera</span><span class="c7">.</span><span class="c0">updateProjectionMatrix</span><span class="c2">();</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderer</span><span class="c7">.</span><span class="c0">setSize</span><span class="c7">(</span><span class="c0">window</span><span class="c7">.</span><span class="c0">innerWidth</span><span class="c7">,</span><span class="c0">&nbsp;window</span><span class="c7">.</span><span class="c0">innerHeight</span><span class="c2">);</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">});</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c3"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; animate</span><span class="c2">();</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c1">&lt;/</span><span class="c6">script</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c1">&lt;/</span><span class="c6">body</span><span class="c1 c9">&gt;</span></p><p class="c3"><span class="c1">&lt;/</span><span class="c6">html</span><span class="c1 c9">&gt;</span></p><p class="c3 c8"><span class="c0 c9"></span></p><p class="c8 c17"><span class="c9 c18"></span></p></body></html>